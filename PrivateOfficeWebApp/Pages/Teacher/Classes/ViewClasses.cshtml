@page
@model PrivateOfficeWebApp.Pages.Teacher.Classes.EditModel
@* ReSharper disable CommentTypo *@
@* ReSharper disable MarkupTextTypo *@
	<div>
        <nav class="navbar" style="background-color: #0866C6">
            <a asp-page="../Courses/IndexCourse" asp-route-id="@Request.Cookies["idTeacher"]" class="navbar-brand" style="color: white">АРМ Преподавателя</a>
            <form method="post" class="form-inline">
                <input class="btn btn-outline-primary my-2 my-sm-0" type="submit" style="background-color:#E5E5E5; color:#0866C6" value="Выйти" asp-page-handler="LogOut" />
            </form>
        </nav>
    </div>

    <div class="container-fluid mt-3">
        <div class="form-group d-flex bd-highlight mb-3">
            <a asp-page="../Courses/Edit" asp-route-id="@Model.Course.IdCourse" class="btn btn-outline-primary p-2 bd-highlight" style="background-color:#0866C6; color:white">Назад</a>
            <button type="button" class="btn btn-outline-primary ml-auto p-2 bd-highlight" style="background-color:#0866C6; color:white" data-toggle="modal"
                    data-target="#addNewClass">
                <span style="color: white">Добавить новое занятие</span>
            </button>
        </div>
    </div>
            <form method="post" class="needs-validation" novalidate>
                <div class="modal fade" id="addNewClass" tabindex="-1" role="dialog" aria-labelledby="addNewClass"
                     aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Добавление нового занятия</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>

                            <div class="modal-body pb-0">
                                <div class="form-group">
                                    <label hidden="hidden">ID курса</label>
                                    <input type="text" class="form-control" id="InputTheme" asp-for="Class.IdCourse" value="@Model.Course.IdCourse" hidden="hidden" />
                                    <label>Тема занятия</label>
                                    <input type="text" class="form-control" id="InputTheme" asp-for="Class.NameClasses" required>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите тему занятия
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputGroup">Тип занятия</label>
                                    <select class="custom-select" id="TypeClass" name="TypeClass" asp-for="Class.IdTypeClasses" required>
                                        <option value="1" tabindex="1">Лабораторная работа</option>
                                        <option value="2" tabindex="2">Лекция</option>
                                        <option value="3" tabindex="3">Семинар</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите тип занятия
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputGroup">День недели</label>
                                    <select class="custom-select" id="InputDay" asp-for="Class.DaysWeek" required>
                                        <option value="Понедельник" tabindex="1">Понедельник</option>
                                        <option value="Вторник" tabindex="2">Вторник</option>
                                        <option value="Среда" tabindex="3">Среда</option>
                                        <option value="Четверг" tabindex="1">Четверг</option>
                                        <option value="Пятница" tabindex="2">Пятница</option>
                                        <option value="Суббота" tabindex="3">Суббота</option>
                                    </select>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите день недели
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputDate">Дата занятия</label>
                                    <input type="date" class="form-control" id="InputDate" asp-for="Class.DateClasses" />
                                    <div class="invalid-feedback">
                                        Пожалуйста введите дату занятия
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputText">Аудитория</label>
                                    <input type="text" class="form-control" id="InputText" asp-for="Class.Cabinet" />
                                    <div class="invalid-feedback">
                                        Пожалуйста введите аудиторию
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputGroup">Время начала</label>
                                    <input type="text" class="form-control" id="InputTimeBegin" asp-for="Class.StartTime" required>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите время начала
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputGroup">Время окончания</label>
                                    <input type="text" class="form-control" id="InputTimeEnd" asp-for="Class.EndTime" required>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите время окончания
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="InputGroup">Периодичность</label>
                                    <input type="text" class="form-control" id="InputСountClass" asp-for="Class.ReplayClasses" required>
                                    <div class="invalid-feedback">
                                        Пожалуйста введите периодичность
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Отмена</button>
                                <!--по нажатию этой кнопки происходит добавление в таблицу и бд-->
                                <input type="submit" class="btn btn-primary" value="Добавить" />
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <input hidden="hidden" type="number" id="idgroup" name="idgroup" value="@Model.Course.IdGroup" />
                </div>
            </form>
    
                <!--TODO:Добавить информацию о курсе(без редактирования)-->
                <table  class="table table-bordered" style="border: solid   #0866C6 2px; background-color:white; width:100%">
                    <thead>
                        <tr>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                Название занятия(тема)
                            </th>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                Дата занятия
                            </th>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                День недели
                            </th>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                Аудитория
                            </th>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                Время начала
                            </th>
                            <th style="border: solid   #0866C6 2px; background-color:white ">
                                Время окончания
                            </th>

                            <th style="border: solid   #0866C6 2px; background-color:white "></th>
                            
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Classes != null)
                        {
                            @foreach (var item in Model.Classes)
                            {
                        <tr>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @Html.DisplayFor(modelItem => item.NameClasses)
                            </td>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @item.DateClasses.ToShortDateString()
                            </td>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @Html.DisplayFor(modelItem => item.DaysWeek)
                            </td>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @Html.DisplayFor(modelItem => item.Cabinet)
                            </td>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @Html.DisplayFor(modelItem => item.StartTime)
                            </td>
                            <td class=" pb-0" style="border: solid   #0866C6 1px; background-color:white ">
                                @Html.DisplayFor(modelItem => item.EndTime)
                            </td>

                            <td style="border: solid   #0866C6 1px; background-color:white">
                                
                                <form method="post" class="d-flex justify-content-between">
                                    <a asp-page="../Classes/EditClass" asp-route-id="@item.IdClasses">Подробнее</a> 
                                    |<input hidden="hidden" type="number" name="id" value="@item.IdClasses" />
                                    <input hidden="hidden" type="number" asp-for="Class.IdCourse" value="@item.IdCourse" />
                                    <a class="bd-highlight" asp-page="../StudentsTable/VisitedStudent" asp-route-id="@item.IdClasses">Посещение студентов</a>
                                    <input type="submit" value="Удалить" class="btn btn-outline-danger" asp-page-handler="Delete" />
                                </form>
                               
                            </td>

                        </tr>
                            }
                        }
                    </tbody>
                </table>
      

            <script>
                (function () {
                    'use strict';
                    window.addEventListener('load', function () {
                        var forms = document.getElementsByClassName('needs-validation');
                        var validation = Array.prototype.filter.call(forms, function (form) {
                            form.addEventListener('submit', function (event) {
                                if (form.checkValidity() === false) {
                                    event.preventDefault();
                                    event.stopPropagation();
                                }
                                form.classList.add('was-validated');
                            }, false);
                        });
                    }, false);
                })();
            </script>


